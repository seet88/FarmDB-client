(this.webpackJsonpfarmdb=this.webpackJsonpfarmdb||[]).push([[0],{110:function(e,t,n){e.exports={box:"TemplateFieldBox_box__J2Qkg",leftSide:"TemplateFieldBox_leftSide__3m42l",description:"TemplateFieldBox_description__1xdap",libName:"TemplateFieldBox_libName__1z6TS"}},135:function(e,t,n){e.exports={ul:"TemplateFields_ul__2K5_A",addButton:"TemplateFields_addButton__1u_7n"}},173:function(e,t,n){e.exports={list:"CImage_list__2otOE"}},179:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useScriptField}));var _home_runner_work_FarmDB_client_FarmDB_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17),_store_editedEntry_slice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),_store_librariesData_slice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31),_store_templateLibraries_slice__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(33),useField=function(e){console.log("aaa");var t,n=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__.c)((function(t){return Object(_store_editedEntry_slice__WEBPACK_IMPORTED_MODULE_2__.f)(t,e)}));if("libEntry"!==(null===n||void 0===n?void 0:n.type))return null===n||void 0===n||null===(t=n.field)||void 0===t?void 0:t.value},useLinkToEntryField=function(e){var t,n,i,l,a,r,o,c,d,u,s,b,j=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__.c)((function(t){return Object(_store_editedEntry_slice__WEBPACK_IMPORTED_MODULE_2__.f)(t,e)}));(null===j||void 0===j||null===(t=j.field)||void 0===t?void 0:t.entryLinks)&&(null===j||void 0===j||null===(n=j.field)||void 0===n||null===(i=n.entryLinks)||void 0===i?void 0:i.length)>0&&(console.log("field?.field?.entryLinks",null===j||void 0===j||null===(u=j.field)||void 0===u?void 0:u.entryLinks),d=null===j||void 0===j||null===(s=j.field)||void 0===s||null===(b=s.entryLinks[0])||void 0===b?void 0:b.libUUID);var v=[];null===j||void 0===j||null===(l=j.field)||void 0===l||null===(a=l.entryLinks)||void 0===a||a.forEach((function(e){v.push(e.rowUUID)}));var f=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__.c)((function(e){return Object(_store_templateLibraries_slice__WEBPACK_IMPORTED_MODULE_4__.f)(e,d)})),m=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__.c)((function(e){return Object(_store_librariesData_slice__WEBPACK_IMPORTED_MODULE_3__.h)(e,{libUUID:d,listRowsUUID:v})})),p=useScriptField(null===j||void 0===j||null===(r=j.columnTemplate)||void 0===r||null===(o=r.options[0])||void 0===o?void 0:o.script,null===j||void 0===j?void 0:j.type).value;if("script"===(null===j||void 0===j?void 0:j.type))return p;if("libEntry"!==(null===j||void 0===j?void 0:j.type))return null===j||void 0===j||null===(c=j.field)||void 0===c?void 0:c.value;function O(e){var t;return this[null===(t=f.columns.find((function(t){return t.name.toLowerCase()===e.toLowerCase()})))||void 0===t?void 0:t.sqlFieldName]}return(null===m||void 0===m?void 0:m.map((function(e){var t=Object(_home_runner_work_FarmDB_client_FarmDB_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e);return t.fieldLink=O,t})))||[]},useScriptField=function useScriptField(script,fieldType){var scriptValue,ScriptResult={status:"InProgress",value:null,error:null};if("script"!==fieldType)return ScriptResult;var useLinkToEntryField_t=function(e){return useLinkToEntryField(e)},scriptJSON=script,scriptObject=JSON.parse(scriptJSON);console.log("scriptObject.expr",scriptObject.expr);var scriptCode=scriptObject.expr;scriptCode=scriptCode.replaceAll("].field(","]?.fieldLink("),scriptCode=scriptCode.replaceAll("field("," useLinkToEntryField_t("),scriptCode=scriptCode.replaceAll("srd("," return("),scriptCode=scriptCode.replaceAll("src"," ");var code=[];if(!scriptCode.includes("return")){var lastLine=!0;scriptCode.split("\n").reverse().forEach((function(e){e.trim().length>3&&(lastLine?code.push(" return ".concat(e)):code.push(e),lastLine=!1)})),console.log("code",code),console.log("code joined",code.reverse().join("\n")),scriptCode=code.reverse().join("\n")}console.log("before eval",scriptCode);var evalCode="\nconst functionScript = () => {\n  ".concat(scriptCode,"\n  return 'Ups no return'\n};\n// console.log(functionScript());\nscriptValue = functionScript();\n\n");try{eval(evalCode),ScriptResult.value=scriptValue,ScriptResult.status="success"}catch(e){ScriptResult.error=e,ScriptResult.status="error",e instanceof SyntaxError&&console.error(e.message)}return ScriptResult},_unused_webpack_default_export=useField},183:function(e,t,n){e.exports={list:"LibrariesList_list__d57me",item:"LibrariesList_item__e7j7n"}},185:function(e,t,n){e.exports={main:"LinkToLibraryField_main__2O8Lh"}},186:function(e,t,n){e.exports={goBack:"GoBack_goBack__gYX2-"}},221:function(e,t,n){},222:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var i=n(1),l=n.n(i),a=n(66),r=n.n(a),o=(n(221),n(222),n(22)),c=n(42),d=n(288),u=n(290),s=n(329),b=n(0),j=function(e){var t=e.entry,n=e.mode,i=e.libUUID,l=Object(b.jsx)(d.a,{children:Object(b.jsx)(u.a,{primary:t.fe_title,secondary:t.fe_description})});return"linking"===n?Object(b.jsx)(s.a,{children:l}):Object(b.jsx)(c.b,{to:{pathname:"/library/entry",state:{libUUID:i,rowUUID:null===t||void 0===t?void 0:t.rowUUID,mode:"view"}},children:l})},v=n(17),f=n(33),m=n(25),p=n(330),O=n(331),h=n(332),x=n(112),g=n(120),U=n.n(g),y=n(171),_=n.n(y),D=n(23),I=function(e){var t=Object(D.g)();return Object(b.jsx)(s.a,{sx:{flexGrow:1},children:Object(b.jsx)(p.a,{position:"static",children:Object(b.jsxs)(O.a,{children:["empty"!==e.mode&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:function(){t.goBack()},children:Object(b.jsx)(U.a,{})}),Object(b.jsx)(x.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:e.title}),Object(b.jsx)(h.a,{size:"large",edge:"end",color:"inherit","aria-label":"home",sx:{mr:2},onClick:function(){t.push("/")},children:Object(b.jsx)(_.a,{})})]}),e.children]})})})},w=function(e){var t=e.library,n=(e.mode,t.name);return Object(b.jsx)(I,{title:n})},k=n(31),C=n(318),L=n(333),N=n(334),T=n(293),S=function(e){var t,n=e.libUUID,i=e.mode,l=e.parentColumnUUID,a=e.clickEntryLinkHandler,r=Object(D.h)();"linking"!==i&&(n=null===r||void 0===r||null===(t=r.state)||void 0===t?void 0:t.libUUID),console.log("libUUID",n);var c=Object(v.b)(),s=Object(v.c)((function(e){return Object(k.f)(e,n)})),p={name:null===s||void 0===s?void 0:s.name},O=Object(v.c)((function(e){return Object(f.f)(e,n)})),g=function(e){if("linking"===i){var t;console.log("entry",e);var r=null===(t=O.columns.find((function(e){return e.columnUUID===l})))||void 0===t?void 0:t.sqlFieldName,d=Object(o.a)(Object(o.a)({},e),{},{parentColumnUUID:l,newUUID:Object(C.a)(),libUUID:n,sqlTableName:O.sqlTableName,columnParentName:r});c(Object(m.a)(d)),a()}},y=function(e){var t=e.entry,n=e.children,i=e.clickHandler;return Object(b.jsx)("div",{onClick:function(){return i(t)},children:n})};return console.log("libData",s),Object(b.jsxs)(b.Fragment,{children:["linking"!==i&&Object(b.jsx)(w,{library:p,mode:i}),"linking"===i&&Object(b.jsxs)(I,{mode:"empty",children:[Object(b.jsx)(h.a,{size:"large",edge:"start",color:"inherit","aria-label":"goBack",sx:{mr:2},onClick:a,children:Object(b.jsx)(U.a,{})}),Object(b.jsx)(x.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:p.name})]}),Object(b.jsxs)(L.a,{sx:{width:"100%",bgcolor:"primary"},component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(b.jsx)(N.a,{component:"div",id:"nested-list-subheader",sx:{backgroundColor:"primary.light"},children:"Entries List Items:"}),children:[!(null===s||void 0===s?void 0:s.rows.length)>0&&Object(b.jsx)(d.a,{children:Object(b.jsx)(u.a,{primary:"No entry yet"})}),null===s||void 0===s?void 0:s.rows.map((function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y,{entry:e,clickHandler:g,children:Object(b.jsx)(j,{entry:e,libUUID:s.libUUID,mode:i})},e.rowUUID),Object(b.jsx)(T.a,{})]})}))]})]})},E=n(10),F=n(321),B=function(e){var t=e.field,n=e.mode,i=Object(v.b)(),l="view"!==n;return Object(b.jsx)(F.a,{id:t.columnUUID,name:t.columnName,label:Object(b.jsx)(x.a,{variant:"headline",component:"h2",color:"black",children:t.columnName}),focused:!0,disabled:!l,type:"number",defaultValue:null===t||void 0===t?void 0:t.value,onBlur:function(e){var n={columnUUID:t.columnUUID,type:e.target.type,checked:e.target.checked,value:e.target.value};i(Object(m.h)(n))},sx:{backgroundColor:l?"primary.lighter":"default",mx:2}})},P=function(e){var t=e.field,n=e.mode;return Object(b.jsx)(B,{field:t,mode:n})},M=function(e){var t=e.field,n=e.mode,i=Object(v.b)(),l="view"!==n;return Object(b.jsx)(F.a,{id:t.columnUUID,name:t.columnName,label:Object(b.jsx)(x.a,{variant:"headline",component:"h2",color:"black",children:t.columnName}),multiline:!0,focused:!0,maxRows:14,disabled:!l,defaultValue:null===t||void 0===t?void 0:t.value,onBlur:function(e){var n={columnUUID:t.columnUUID,type:e.target.type,checked:e.target.checked,value:e.target.value};i(Object(m.h)(n))},sx:{backgroundColor:l?"primary.lighter":"default",width:"95%",mx:2}})},A=n(18),R=n(152),q=(n(229),n(173)),V=n.n(q),J=function(e){var t=e.field,n=e.mode,l=Object(i.useState)(!1),a=Object(E.a)(l,2),r=a[0],o=a[1],c=Object(i.useState)(String(t.value).split("\n")),d=Object(E.a)(c,2),u=d[0],s=d[1];return"edit"===n?Object(b.jsxs)("ul",{className:V.a.list,children:[u.map((function(e,t){return e.length>5&&Object(b.jsxs)("li",{children:[Object(b.jsx)("img",{src:e,alt:"Wrong path",width:325}),Object(b.jsx)("button",{onClick:function(){return function(e){var t=Object(A.a)(u);t.splice(e,1),s(t)}(t)},children:"X"})]},t)})),r&&Object(b.jsx)("li",{children:Object(b.jsx)(R.Camera,{isImageMirror:!1,idealFacingMode:R.FACING_MODES.ENVIRONMENT,onTakePhoto:function(e){!function(e){console.log("takePhoto",e),s([].concat(Object(A.a)(u),[e])),o(!1)}(e)}})},9998),!r&&Object(b.jsxs)("li",{children:[Object(b.jsx)("button",{onClick:function(){o(!0)},children:"Camera"}),Object(b.jsx)("button",{children:"Store"})]},9999)]}):(null===t||void 0===t?void 0:t.value)?Object(b.jsx)(i.Fragment,{children:"view"===n&&u.map((function(e,t){return Object(b.jsx)("img",{src:e,alt:"Wrong path",width:325},t)}))}):Object(b.jsx)("div",{})},H=function(e){var t=e.field,n=e.mode,i=Object(v.b)();if(!(null===t||void 0===t?void 0:t.value))return Object(b.jsx)("div",{});console.log("field?.value",null===t||void 0===t?void 0:t.value);var l=new Date(null===t||void 0===t?void 0:t.value).toISOString().replace("T"," ").split(" ")[0];return console.log("dateString",l),"view"===n?Object(b.jsx)("div",{children:l}):Object(b.jsx)("input",{type:"date",id:t.columnUUID,name:t.columnName,onBlur:function(e){var n={columnUUID:t.columnUUID,type:e.target.type,checked:e.target.checked,value:e.target.value};console.log("data",n),i(Object(m.h)(n))},defaultValue:l})},W=n(311),G=n(299),K=n(310);var z,$,Y,Z,X,Q,ee,te=function(e){var t=e.field,n=e.mode;console.log("value of date",JSON.parse(null===t||void 0===t?void 0:t.value),null===t||void 0===t?void 0:t.value);var l=Object(i.useState)(function(e){return!!function(e){return!!e&&""!==e&&!1!==e&&null!==e&&void 0!==e&&"null"!==e&&""!==(e+=" ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(e)}(null===t||void 0===t?void 0:t.value)?new Date(JSON.parse(null===t||void 0===t?void 0:t.value)):null),a=Object(E.a)(l,2),r=a[0],c=a[1],d=Object(v.b)();Object(i.useEffect)((function(){!function(){console.log(" saveDataHandler value of date",JSON.stringify(r),r);var e={columnUUID:t.columnUUID,type:"dateTime",checked:"",value:JSON.stringify(r)};d(Object(m.h)(e)),console.log("here saveDataHandler")}()}),[r]);var u="view"!==n;return console.log("field?.value",null===t||void 0===t?void 0:t.value),Object(b.jsx)(s.a,{sx:{mx:2},children:Object(b.jsx)(G.b,{dateAdapter:W.a,children:Object(b.jsx)(K.a,{renderInput:function(e){return Object(b.jsx)(F.a,Object(o.a)({},e))},value:r,label:Object(b.jsx)(x.a,{variant:"headline",component:"h2",color:"black",children:t.columnName}),disabled:!u,onChange:function(e){return c(e)}})})})},ne=function(e){var t=e.value;return Object(b.jsx)("div",{children:t})},ie=function(e){var t=e.field;if(!(null===t||void 0===t?void 0:t.value))return Object(b.jsx)("div",{});var n=String(t.value).split("\n");return Object(b.jsx)(i.Fragment,{children:n.map((function(e,t){return Object(b.jsx)("audio",{controls:!0,children:Object(b.jsx)("source",{src:e,type:"audio/ogg"})},t)}))})},le=n(340),ae=n(315),re=function(e){var t=e.field,n=e.mode,i=Object(v.b)();console.log("values",null===t||void 0===t?void 0:t.value);var l="view"===n,a="1"===(null===t||void 0===t?void 0:t.value);return Object(b.jsx)(le.a,{value:"start",control:Object(b.jsx)(ae.a,{id:t.columnUUID,name:t.columnName,checked:a,onChange:function(e){var n={columnUUID:t.columnUUID,type:e.target.type,checked:e.target.checked,value:e.target.value};i(Object(m.h)(n))},disabled:l,sx:{backgroundColor:l?"default":"primary.lighter"},inputProps:{"aria-label":"controlled"}}),label:Object(b.jsx)(x.a,{variant:"headline",component:"h3",color:"black",children:t.columnName}),labelPlacement:"top"})},oe=n(317),ce=n(341),de=function(e){var t=e.field,n=e.mode,i=e.options,l=Object(v.b)(),a=[].concat(Object(A.a)(i),[{value:"",index:(null===i||void 0===i?void 0:i.length)+1||1}]),r="view"===n;return Object(b.jsx)(le.a,{value:"start",control:Object(b.jsx)(oe.a,{id:t.columnUUID,name:t.columnName,disabled:r,value:(null===t||void 0===t?void 0:t.value)||"",sx:{backgroundColor:r?"default":"primary.lighter"},onChange:function(e){var n={columnUUID:t.columnUUID,type:e.target.type,checked:e.target.checked,value:e.target.value};console.log("e",e),console.log("e.target",e.target),console.log("e.target.value",e.target.value),console.log("e.target.selectedIndex",e.target.selectedIndex),l(Object(m.h)(n))},label:"aga",children:null===a||void 0===a?void 0:a.map((function(e){return Object(b.jsx)(ce.a,{value:e.value,children:e.value},e.index)}))}),label:Object(b.jsx)(x.a,{variant:"headline",component:"h3",color:"black",children:t.columnName}),labelPlacement:"top"})},ue={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,maxHeight:700,bgcolor:"primary.lighter",border:"2px solid #000",boxShadow:24,overflow:"auto"},se=function(e){var t=e.toggleShowModal,n=e.libUUID,i=e.columnUUID;return console.log("modal:",n,"columnUUID",i),Object(b.jsx)(s.a,{sx:ue,children:Object(b.jsx)(S,{libUUID:n,mode:"linking",parentColumnUUID:i,clickEntryLinkHandler:t})})},be=n(342),je=n(323),ve=n(303),fe=n(240),me=n(301),pe=n(302),Oe=n(127),he=n.n(Oe),xe=n(126),ge=n.n(xe),Ue=function(e){var t,n,l,a,r=e.field,o=e.mode,j=e.columnTemplate,f=Object(v.b)(),p=Object(i.useState)(!1),O=Object(E.a)(p,2),x=O[0],g=O[1],U=Object(i.useState)(!0),y=Object(E.a)(U,2),_=y[0],D=y[1],I=function(){g(!x)};Object(i.useEffect)((function(){document.body.style.overflow=x?"hidden":"unset"}),[x]),a=null===j||void 0===j||null===(t=j.options[0])||void 0===t?void 0:t.dictionaryLibraryUUID;var w=null===j||void 0===j||null===(n=j.options[0])||void 0===n?void 0:n.dictionaryLibraryName,k="edit"===o||"addNewEntry"===o;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(d.a,{onClick:function(){D(!_)},children:[Object(b.jsx)(u.a,{primary:w,secondary:"Link to entry"}),_?Object(b.jsx)(me.a,{}):Object(b.jsx)(pe.a,{})]}),Object(b.jsx)(T.a,{}),Object(b.jsx)(be.a,{in:_,timeout:"auto",unmountOnExit:!0,children:Object(b.jsxs)(L.a,{component:"div",disablePadding:!0,children:[null===(l=r.entryLinks)||void 0===l?void 0:l.map((function(e,t){return Object(b.jsxs)(s.a,{children:[Object(b.jsx)(c.b,{to:{pathname:"/library/entry",state:{libUUID:null===e||void 0===e?void 0:e.libUUID,rowUUID:null===e||void 0===e?void 0:e.rowUUID,mode:"view"}},children:Object(b.jsx)(je.a,{sx:{pl:6},secondaryAction:k&&Object(b.jsx)(h.a,{edge:"end","aria-label":"delete",onClick:function(e){return n=e,i=t,console.log("delete link handler",i),n.preventDefault(),void f(Object(m.d)({columnUUID:null===r||void 0===r?void 0:r.columnUUID,entryIndex:i}));var n,i},children:Object(b.jsx)(ge.a,{})}),children:Object(b.jsx)(u.a,{primary:null===e||void 0===e?void 0:e.rowTitle})})}),Object(b.jsx)(T.a,{variant:"inset",component:"li"})]},t)})),k&&Object(b.jsxs)(d.a,{sx:{pl:6},onClick:I,children:[Object(b.jsx)(ve.a,{children:Object(b.jsx)(he.a,{})}),Object(b.jsx)(u.a,{primary:"Add from list"})]})]})}),Object(b.jsx)(fe.a,{open:x,onClose:function(){return g(x)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(b.jsx)(s.a,{children:Object(b.jsx)(se,{toggleShowModal:I,libUUID:a,columnUUID:null===r||void 0===r?void 0:r.columnUUID})})})]})},ye=n(300),_e=n(304),De=n(338),Ie=n(343),we=n(339),ke=n(327),Ce=n(176),Le=n.n(Ce),Ne=function(e){var t=e.entry,n=e.setMode,l=Object(i.useState)(!1),a=Object(E.a)(l,2),r=a[0],o=a[1],c=Object(v.b)(),d=Object(D.g)(),u=function(e){e.preventDefault(),o(!1)};return Object(b.jsxs)(I,{title:null===t||void 0===t?void 0:t.title,children:[Object(b.jsx)(h.a,{size:"large",edge:"end",color:"inherit","aria-label":"edit",sx:{mr:1},onClick:function(){n("edit")},children:Object(b.jsx)(Le.a,{})}),Object(b.jsx)(h.a,{size:"large",edge:"end",color:"inherit","aria-label":"menu",sx:{mr:1},onClick:function(e){e.preventDefault(),o(!0)},children:Object(b.jsx)(ge.a,{})}),Object(b.jsxs)(ye.a,{open:r,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(b.jsx)(_e.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(b.jsx)(De.a,{children:Object(b.jsx)(Ie.a,{id:"alert-dialog-description",children:"Do you want delete this row data? This can't be undone."})}),Object(b.jsxs)(we.a,{children:[Object(b.jsx)(ke.a,{onClick:u,children:"Disagree"}),Object(b.jsx)(ke.a,{onClick:function(e){e.preventDefault(),c(Object(k.e)({libUUID:null===t||void 0===t?void 0:t.libUUID,rowUUID:null===t||void 0===t?void 0:t.rowUUID})),d.goBack()},autoFocus:!0,children:"Agree"})]})]})]})},Te=n(177),Se=n.n(Te),Ee=n(178),Fe=n.n(Ee),Be=function(e){var t=e.setMode,n=e.actionButtonHandler,i=n.cancelHandler,l=n.saveHandler,a=n.setIsSnackbarOpen;return Object(b.jsxs)(I,{mode:"empty",children:[Object(b.jsx)(h.a,{size:"large",edge:"start",color:"inherit","aria-label":"save",sx:{mr:2},onClick:function(){t("view"),l(),a(!0)},children:Object(b.jsx)(Se.a,{})}),Object(b.jsx)(x.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Edit"}),Object(b.jsx)(h.a,{size:"large",edge:"end",color:"inherit","aria-label":"cancel",sx:{mr:2},onClick:function(){t("view"),i()},children:Object(b.jsx)(Fe.a,{})})]})},Pe=n(344),Me=n(51),Ae=n(314),Re=Object(Ae.a)(z||(z=Object(Me.a)(["\n  query {\n    librariesTemplates {\n      name\n      id\n      libUUID\n      sqlTableName\n      columns {\n        type\n        name\n        order\n        description\n        defaultValue\n        columnUUID\n        usage\n        sqlFieldName\n        sqlFieldType\n        options {\n          value\n          index\n          default\n          dictionaryLibraryUUID\n          dictionaryLibraryName\n          script\n        }\n      }\n    }\n  }\n"]))),qe=(Object(Ae.a)($||($=Object(Me.a)(["\n  query {\n    librariesData {\n      name\n      id\n      libUUID\n      rows {\n        rowUUID\n        uniqueName\n        creationDate\n        modificationDate\n        columns {\n          value\n          columnName\n          columnUUID\n          entryLinks {\n            libUUID\n            uniqueName\n            rowUUID\n          }\n        }\n      }\n    }\n  }\n"]))),Object(Ae.a)(Y||(Y=Object(Me.a)(["\n  query {\n    librariesDataPG {\n      name\n      id\n      libUUID\n      rows {\n        rowUUID\n        fe_title\n        fe_description\n        rowJSON\n      }\n    }\n  }\n"])))),Ve=Object(Ae.a)(Z||(Z=Object(Me.a)(["\n  mutation updateLibraryRowsData($libraryData: LibraryDataInput) {\n    updateLibraryRowsData(libraryDataInput: $libraryData)\n  }\n"]))),Je=Object(Ae.a)(X||(X=Object(Me.a)(["\n  mutation addLibraryRowsData($libraryData: LibraryDataInput) {\n    addLibraryRowsData(libraryDataInput: $libraryData)\n  }\n"]))),He=Object(Ae.a)(Q||(Q=Object(Me.a)(["\n  mutation addLibraryTemplate($libraryTemplate: LibraryTemplateInput) {\n    addLibraryTemplate(libraryTemplateInput: $libraryTemplate)\n  }\n"]))),We=Object(Ae.a)(ee||(ee=Object(Me.a)(["\n  mutation updateLibraryTemplate($libraryTemplate: LibraryTemplateInput) {\n    updateLibraryTemplate(libraryTemplateInput: $libraryTemplate)\n  }\n"]))),Ge=n(179),Ke=function(e){e.mode,e.field;var t,n=e.columnTemplate;console.log("In script");var i=Object(Ge.a)(null===n||void 0===n||null===(t=n.options[0])||void 0===t?void 0:t.script,null===n||void 0===n?void 0:n.type),l=i.status,a=i.value,r=i.error;return"success"===l?Object(b.jsx)("div",{children:a}):Object(b.jsxs)("div",{children:[" ",r," "]})},ze=n(53),$e=Object(ze.b)({name:"configuration",initialState:{conf:{storageType:"localStorage"}},reducers:{updateConfiguration:function(e,t){e.conf=t.payload}}}),Ye=$e.actions.updateConfiguration,Ze=$e.reducer,Xe=function(e){return e.configuration.conf},Qe=n(326),et=n(319),tt=n(316),nt=function(e,t,n,i){switch(e.type){case"string":return Object(b.jsx)(M,{mode:n,field:t});case"float":return Object(b.jsx)(P,{mode:n,field:t});case"int":return Object(b.jsx)(B,{mode:n,field:t});case"image":return Object(b.jsx)(J,{value:t.value,mode:n,field:t});case"date":return Object(b.jsx)(H,{mode:n,field:t});case"dateTime":return Object(b.jsx)(te,{mode:n,field:t});case"barcode":return Object(b.jsx)(ne,{value:t.value,mode:n,field:t});case"audio":return Object(b.jsx)(ie,{value:t.value,mode:n,field:t});case"checkbox":return Object(b.jsx)(re,{mode:n,field:t});case"dropDownList":return Object(b.jsx)(de,{mode:n,field:t,options:i});case"libEntry":return Object(b.jsx)(Ue,{mode:n,field:t,columnTemplate:e});case"script":return Object(b.jsx)(Ke,{mode:n,field:t,columnTemplate:e});default:return Object(b.jsx)("div",{children:"----"})}},it=function(){var e,t,n,l,a=Object(D.h)(),r=null===(e=a.state)||void 0===e?void 0:e.libUUID,o=null===(t=a.state)||void 0===t?void 0:t.rowUUID;if(!r){var c=localStorage.getItem("entryViewConfig");r=JSON.parse(c).libUUID,o=JSON.parse(c).rowUUID}var d=Object(v.b)(),u=null===(n=Object(v.c)((function(e){return Xe(e)})))||void 0===n?void 0:n.storageType,s=Object(i.useState)(!1),j=Object(E.a)(s,2),p=j[0],O=j[1],h=Object(Pe.a)(Ve),x=Object(E.a)(h,1)[0],g=Object(Pe.a)(Je),U=Object(E.a)(g,1)[0],y=Object(i.useState)("addNewEntry"===(null===a||void 0===a||null===(l=a.state)||void 0===l?void 0:l.mode)?"addNewEntry":"view"),_=Object(E.a)(y,2),I=_[0],w=_[1],L=Object(v.c)((function(e){return Object(f.f)(e,r)}))||{},N=L.columns,S=L.sqlTableName,F=Object(v.c)((function(e){return Object(k.g)(e,{rowUUID:o,libUUID:r})})),B={title:null===F||void 0===F?void 0:F.fe_title,libUUID:r,rowUUID:o,mode:I},P=null===N||void 0===N?void 0:N.map((function(e){var t,n,i=[],l=F?F[e.sqlFieldName]:null;"libEntry"===(null===e||void 0===e?void 0:e.type)?(i=null===e||void 0===e||null===(n=e.options[0])||void 0===n?void 0:n.dictionaryLibraryName,l=F?l:{}):"dropDownList"===(null===e||void 0===e?void 0:e.type)&&(i=null===e||void 0===e?void 0:e.options);return{type:null===e||void 0===e?void 0:e.type,name:null===e||void 0===e?void 0:e.name,order:null===e||void 0===e?void 0:e.order,columnTemplate:e,options:i,field:{value:l,columnUUID:null===e||void 0===e?void 0:e.columnUUID,columnName:null===e||void 0===e?void 0:e.name,entryLinks:F?null===(t=F[e.sqlFieldName])||void 0===t?void 0:t.entrylinks:[]}}}));Object(i.useEffect)((function(){return d(Object(m.g)(P)),function(){console.log("clear state after dismount component"),d(Object(m.b)())}}),[]),Object(i.useEffect)((function(){localStorage.setItem("entryViewConfig",JSON.stringify({rowUUID:o,libUUID:r,mode:I})),d(Object(m.g)(P))}),[o,r,N]);var M=function(e,t){console.log("updated/inserted Entry: ",t,e);var n=function(e){var t,n;return(null===e||void 0===e?void 0:e.hasOwnProperty("value"))?(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.hasOwnProperty("value"))?null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.value:null===e||void 0===e?void 0:e.value:null},i=e.map((function(e){var i,l,a,r,c=null===(i=e.field)||void 0===i||null===(l=i.entryLinks)||void 0===l?void 0:l.map((function(n){return{columnParentName:n.columnParentName?n.columnParentName:e.columnTemplate.sqlFieldName,libUUID:n.libUUID,rowUUID:n.rowUUID,tableName:n.tableName,uuid:e.field.value.value,tableParentName:S,rowParentUUID:t||o}}));return{sqlFieldName:null===e||void 0===e||null===(a=e.columnTemplate)||void 0===a?void 0:a.sqlFieldName,value:n(null===e||void 0===e?void 0:e.field),type:null===e||void 0===e||null===(r=e.columnTemplate)||void 0===r?void 0:r.type,entryLinks:c}})),l=[{rowUUID:t||o,rowJSON:JSON.stringify(i)}];return{sqlTableName:S,libUUID:r,rows:l}},A=function(e,t){try{var n=M(e,t);console.log("libData if Mutation addEntryInPG",n),"outerDatabase"===u&&U({variables:{libraryData:n}})}catch(i){console.log("error occurred while adding entry to db: "+i)}},R=function(e){try{var t=M(e);console.log("libData if Mutation update",t),"outerDatabase"===u&&x({variables:{libraryData:t}})}catch(n){console.log("error occurred while updating entry: "+n)}};console.log("before selectAllFields");var q=Object(v.c)((function(e){return Object(m.e)(e)}));console.log("fields",q),console.log("mode",I);var V=function(e,t){"clickaway"!==t&&O(!1)},J="edit"===I||"addNewEntry"===I;return Object(b.jsxs)(i.Fragment,{children:["view"===I&&Object(b.jsx)(Ne,{entry:B,setMode:w}),J&&Object(b.jsx)(Be,{entry:B,setMode:w,actionButtonHandler:{cancelHandler:function(){d(Object(m.g)(P))},saveHandler:function(){console.log("clicked save button");var e="addNewEntry"===I?Object(C.a)():o,t={editedFields:q,libUUID:r,rowUUID:e};"addNewEntry"===I?(console.log("addNewEntryToDB"),A(q,e),d(Object(k.b)(t))):(console.log("updateEntryInDB"),R(q),d(Object(k.l)(t)))},setIsSnackbarOpen:O}}),Object(b.jsx)(Qe.a,{container:!0,spacing:1,children:null===q||void 0===q?void 0:q.map((function(e){var t;return Object(b.jsxs)(Qe.a,{item:!0,xs:12,sx:{m:1},children:[nt(e.columnTemplate,e.field,I,e.options),Object(b.jsx)(T.a,{})]},null===e||void 0===e||null===(t=e.field)||void 0===t?void 0:t.columnUUID)}))}),Object(b.jsx)(et.a,{open:p,autoHideDuration:5e3,onClose:V,children:Object(b.jsx)(tt.a,{onClose:V,severity:"success",sx:{width:"100%"},children:"Entry saved successfully!"})})]})},lt=n(183),at=n.n(lt),rt=function(e){var t=e.libUUID,n=e.closeMenu,l=Object(D.g)(),a=Object(i.useState)(!1),r=Object(E.a)(a,2),o=r[0],c=r[1],d=Object(v.b)(),u=function(e){e.preventDefault(),n(e),c(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ce.a,{onClick:function(e){e.preventDefault(),l.push({pathname:"/creator",state:{libUUID:t}})},children:"Edit template"}),Object(b.jsx)(ce.a,{onClick:function(e){e.preventDefault(),c(!0)},children:"Delete lib"}),Object(b.jsx)(ce.a,{onClick:n,children:"Option 3"}),Object(b.jsxs)(ye.a,{open:o,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(b.jsx)(_e.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(b.jsx)(De.a,{children:Object(b.jsx)(Ie.a,{id:"alert-dialog-description",children:"Do you want delete this library template with data? This can't be undone."})}),Object(b.jsxs)(we.a,{children:[Object(b.jsx)(ke.a,{onClick:u,children:"Disagree"}),Object(b.jsx)(ke.a,{onClick:function(e){e.preventDefault(),n(e),d(Object(k.d)({libUUID:t})),d(Object(f.c)({libUUID:t})),c(!1)},autoFocus:!0,children:"Agree"})]})]})]})},ot=n(346),ct=n(347),dt=n(348),ut=n(190),st=n(349),bt=n(350),jt=n(184),vt=n.n(jt),ft=function(e){var t=e.library,n=Object(D.g)(),l=Object(i.useState)(null),a=Object(E.a)(l,2),r=a[0],o=a[1],d=Boolean(r),u=function(e){o(null),e.preventDefault()};return Object(b.jsx)(c.b,{to:{pathname:"/library",state:{libUUID:null===t||void 0===t?void 0:t.libUUID}},children:Object(b.jsxs)(ot.a,{sx:{maxWidth:200,m:1,backgroundColor:"primary.light"},children:[Object(b.jsx)(ct.a,{avatar:Object(b.jsx)(dt.a,{image:"https://img.icons8.com/ios/452/field.png",width:"30",component:"img",sx:{maxWidth:50}}),action:Object(b.jsx)(h.a,{id:"additional-action-button","aria-controls":"additional-action-menu","aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:function(e){o(e.currentTarget),e.preventDefault()},children:Object(b.jsx)(vt.a,{})}),title:"",subheader:""}),Object(b.jsx)(ut.a,{id:"additional-action-menu","aria-labelledby":"additional-action-button",anchorEl:r,open:d,onClose:u,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Object(b.jsx)(rt,{closeMenu:u,libUUID:null===t||void 0===t?void 0:t.libUUID})}),Object(b.jsxs)(st.a,{children:[Object(b.jsx)(x.a,{variant:"body1",color:"initial",children:null===t||void 0===t?void 0:t.name}),Object(b.jsxs)(x.a,{variant:"body2",color:"initial",children:["Entries: ",null===t||void 0===t?void 0:t.entriesCount]}),Object(b.jsx)(x.a,{variant:"body3",color:"initial",children:null===t||void 0===t?void 0:t.lastModification})]}),Object(b.jsx)(bt.a,{disableSpacing:!0,children:Object(b.jsx)(h.a,{size:"large",variant:"",edge:"end",color:"primary","aria-label":"home",sx:{mr:1,ml:"auto",backgroundColor:"primary.main",color:"primary.dark","&:hover":{backgroundColor:"secondary.light"}},onClick:function(e){e.preventDefault(),n.push({pathname:"/library/entry",state:{libUUID:null===t||void 0===t?void 0:t.libUUID,mode:"addNewEntry",rowUUID:null}})},children:Object(b.jsx)(he.a,{})})})]})})},mt=function(){var e=Object(v.c)((function(e){return e.librariesTemplate}));return e?Object(b.jsx)("ul",{className:at.a.list,children:e.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(ft,{library:e})},e.libUUID)}))}):Object(b.jsx)("div",{children:"...loading"})},pt=n(320),Ot=n(5),ht=n(185),xt=n.n(ht),gt=function(e){var t=e.setOptions,n=e.options,l=Object(v.c)((function(e){return Object(f.e)(e)}));console.log("getOptionValue",l.find((function(e){return(null===e||void 0===e?void 0:e.libUUID)===(null===n||void 0===n?void 0:n.dictionaryLibraryUUID)})));var a=Object(i.useState)(function(){var e;return!n||(null===n||void 0===n?void 0:n.length)<1?[]:null===(e=l.find((function(e){var t;return(null===e||void 0===e?void 0:e.libUUID)===(null===(t=n[0])||void 0===t?void 0:t.dictionaryLibraryUUID)})))||void 0===e?void 0:e.sqlTableName}()),r=Object(E.a)(a,2),o=r[0],c=r[1],d=function(e){if(!(l.length<=e)){var n=[{dictionaryLibraryName:l[e].name,dictionaryLibraryUUID:l[e].libUUID}];t(n)}};Object(i.useEffect)((function(){l.length&&d(0)}),[l]),console.log("librariesInfo",l);return Object(b.jsxs)("div",{className:xt.a.main,children:["Choose library from list",Object(b.jsx)("select",{onChange:function(e){console.log("LinkToLibraryField in chooseLibHandler",e);var t=e.target.selectedIndex;d(t),c(e.target.value)},defaultValue:o,children:l.map((function(e){return Object(b.jsx)("option",{value:e.sqlTableName,children:e.name},e.libUUID)}))})]})},Ut=n(96),yt=n.n(Ut),_t=function(e){var t=e.setOptions,n=e.options,l=Object(i.useState)(n||[]),a=Object(E.a)(l,2),r=a[0],o=a[1],c=Object(i.useState)(!1),d=Object(E.a)(c,2),u=d[0],s=d[1],j=Object(i.useState)(""),v=Object(E.a)(j,2),f=v[0],m=v[1],p=Object(i.useState)(!1),O=Object(E.a)(p,2),h=O[0],x=O[1];return console.log("points",r,"options",n),Object(b.jsx)(i.Fragment,{children:Object(b.jsxs)("div",{children:["Point list:",Object(b.jsx)("ul",{className:yt.a.ul,children:r.map((function(e,t){return Object(b.jsxs)("li",{className:yt.a.list,children:[e.value," ",e.default?"\u2714":null,Object(b.jsx)("button",{onClick:function(e){return function(e,t){e.preventDefault();var n=Object(A.a)(r);n.splice(t,1),o(n)}(e,t)},children:"\u2715"})]},t)}))}),u&&Object(b.jsxs)("div",{className:yt.a.modal,children:[Object(b.jsxs)("header",{className:yt.a.header,children:[Object(b.jsx)("button",{onClick:function(){s(!1)},children:"\u2190"}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault();var n={default:!r.find((function(e){return e.default}))&&h,index:r.length+1,value:f};if(f){var i=[].concat(Object(A.a)(r),[n]);o([].concat(Object(A.a)(r),[n])),t(i)}m(),s(!1),x(!1)},children:"\u2713"})]}),Object(b.jsx)("label",{htmlFor:"pointName",children:"Point name:"}),Object(b.jsx)("input",{type:"text",id:"pointName",defaultValue:f,onChange:function(e){return m(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"isDefault",children:"Is point Default?"}),Object(b.jsx)("input",{type:"checkbox",id:"isDefault",defaultChecked:h,onChange:function(e){return x(e.target.checked)}})]}),Object(b.jsx)("button",{onClick:function(e){s(!0),e.preventDefault()},children:"Add"}),u&&Object(b.jsx)("div",{className:yt.a.backdrop})]})})},Dt=n(89),It=n.n(Dt),wt=function(e){var t,n=null===e||void 0===e||null===(t=e.options[0])||void 0===t?void 0:t.script;return JSON.parse(n).expr},kt=function(e){var t=e.saveFieldConfigHandler,n=(e.fieldConfigTemplate,e.cancelModal),l=e.fieldConfig,a=[{name:"Text",type:"string"},{name:"Float",type:"float"},{name:"Int",type:"int"},{name:"Image",type:"image"},{name:"Audio",type:"audio"},{name:"Date time",type:"dateTime"},{name:"Checkbox",type:"checkbox"},{name:"Script",type:"script"},{name:"Dropdown list",type:"dropDownList"},{name:"Link to library",type:"libEntry"}],r=[{name:"Normal",type:"normal"},{name:"Title",type:"title"},{name:"Description",type:"description"},{name:"Status",type:"status"}],c=function(){var e;return null===(e=a.find((function(e){return e.type===j.type})))||void 0===e?void 0:e.type},d={usage:r[0].type},u=Object(i.useState)(l||d),s=Object(E.a)(u,2),j=s[0],v=s[1],f=Object(i.useState)(c()||a[0].type),m=Object(E.a)(f,2),p=m[0],O=m[1],h=Object(i.useState)(j.options||[]),x=Object(E.a)(h,2),g=x[0],U=x[1],y=function(e){U(e)},_=function(e){console.log("e",e),console.log("fieldValue",e.target.value),console.log("target",e.target),v((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(Ot.a)({},e.target.id,"checkbox"===(n=e.target).type?n.checked?1:0:n.value));var n}))};console.log("fieldType",p),console.log("fieldConfig",j);return console.log("aviableTypesFound! ",c(),j.type),Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)("div",{className:It.a.modal,children:Object(b.jsxs)("div",{className:It.a.container,children:[Object(b.jsxs)("header",{className:It.a.header,children:[Object(b.jsx)("button",{id:"cancelFields",onClick:n,children:"\u2190"}),Object(b.jsx)("button",{id:"submitFields",onClick:function(e){e.preventDefault(),console.log(e.target);var n=Object(o.a)({},j);n.type=p,n.sqlFieldName=n.name.replaceAll("  "," ").replaceAll(" ","_").toLowerCase(),n.options=g,t(n)},children:"\u2713"})]}),Object(b.jsx)("h2",{children:"Field Creator"}),Object(b.jsxs)("section",{className:It.a.type,children:[Object(b.jsx)("label",{htmlFor:"field",children:"Field type:"}),Object(b.jsx)("select",{name:"field",id:"field",onChange:function(e){return O(e.target.value)},defaultValue:p,children:a.map((function(e){return Object(b.jsx)("option",{value:e.type,children:e.name},e.type)}))})]}),p&&Object(b.jsxs)("form",{className:It.a.form,children:[Object(b.jsx)("label",{htmlFor:"name",children:"Field Name:"}),Object(b.jsx)("input",{type:"text",id:"name",onBlur:_,defaultValue:j.name}),Object(b.jsx)("label",{htmlFor:"sqlFieldType",children:"Field sql type:"}),Object(b.jsx)("input",{type:"text",id:"sqlFieldType",onBlur:_,defaultValue:j.sqlFieldType}),function(e){return"checkbox"===e||"dropDownList"===e||"libEntry"===e||"script"===e?null:Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)("label",{htmlFor:"description",children:"Hint:"}),Object(b.jsx)("input",{type:"text",id:"description",onBlur:_,defaultValue:j.description})]})}(p),function(e){return"dropDownList"===e||"libEntry"===e||"script"===e?null:"checkbox"===e?Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)("label",{htmlFor:"defaultValue",children:"Default value:"}),Object(b.jsx)("input",{type:"checkbox",id:"defaultValue",onChange:_,defaultChecked:j.defaultValue})]}):Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)("label",{htmlFor:"defaultValue",children:"Default value:"}),Object(b.jsx)("input",{type:"text",id:"defaultValue",onBlur:_,defaultValue:j.defaultValue})]})}(p),"dropDownList"===p&&Object(b.jsx)(_t,{setOptions:y,options:j.options}),"libEntry"===p&&Object(b.jsx)(gt,{setOptions:y,options:j.options}),"script"===p&&Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)("label",{htmlFor:"script",children:" Script code "}),Object(b.jsx)("textarea",{defaultValue:wt(j),rows:20,onBlur:function(e){var t;console.log("scriptValue",e.target.value);var n=[],i=null===j||void 0===j||null===(t=j.options[0])||void 0===t?void 0:t.script,l=JSON.parse(i);l.expr=e.target.value,n[0]={script:JSON.stringify(l)},U(n)}})]}),Object(b.jsx)("label",{htmlFor:"usage",children:"Field view:"}),Object(b.jsx)("select",{id:"usage",name:"usage",onChange:_,defaultValue:j.usage,children:r.map((function(e){return Object(b.jsx)("option",{value:e.type,children:e.name},e.type)}))})]})]})}),Object(b.jsx)("div",{className:It.a.backdrop})]})},Ct=n(110),Lt=n.n(Ct),Nt=function(e){var t=e.fieldConfig,n=e.editField;return Object(b.jsxs)("li",{className:Lt.a.box,onClick:function(){return n(t.columnUUID)},children:[Object(b.jsxs)("div",{className:Lt.a.leftSide,children:[Object(b.jsxs)("div",{children:[" ",t.name," "]}),Object(b.jsxs)("div",{className:Lt.a.description,children:[Object(b.jsxs)("div",{children:[" ",t.type]}),t.options.length>0&&Object(b.jsxs)("div",{className:Lt.a.libName,children:["\u2003 ",t.options[0].dictionaryLibraryName]})]})]}),Object(b.jsxs)("div",{children:[" ",t.usage]})]},t.columnUUID)},Tt=n(135),St=n.n(Tt),Et=function(e){var t=e.saveFieldsConfigHandler,n=e.fields,l=Object(i.useState)(n||[]),a=Object(E.a)(l,2),r=a[0],c=a[1],d=Object(i.useState)("view"),u=Object(E.a)(d,2),s=u[0],j=u[1],v=Object(i.useState)(),f=Object(E.a)(v,2),m=f[0],p=f[1];Object(i.useEffect)((function(){t(r)}),[r]);var O=function(e){j("edit");var t=r.find((function(t){return t.columnUUID===e}));p(t)};return console.log("LIST fieldsConfig",r),Object(b.jsxs)("div",{className:St.a.fields,children:["template fields",Object(b.jsxs)("ul",{className:St.a.ul,children:[0===r.length&&Object(b.jsx)("div",{children:"No field added yet..."}),null===r||void 0===r?void 0:r.map((function(e){return Object(b.jsx)(Nt,{fieldConfig:e,editField:O},e.columnUUID)}))]}),Object(b.jsx)("button",{onClick:function(){return j("addNew")},className:St.a.addButton,children:"+"}),"addNew"===s&&Object(b.jsx)(kt,{saveFieldConfigHandler:function(e){console.log("fieldConfig in TemplateFieldCreator",e),(null===e||void 0===e?void 0:e.columnUUID)||(e.columnUUID=Object(C.a)()),c((function(t){return[].concat(Object(A.a)(t),[e])})),j("view")},cancelModal:function(){return j("view")}}),"edit"===s&&Object(b.jsx)(kt,{saveFieldConfigHandler:function(e){console.log("update",e);var t=r.findIndex((function(t){return t.columnUUID===e.columnUUID})),n=Object(A.a)(r);n[t]=e,c(n),j("view")},cancelModal:function(){return j("view")},fieldConfig:Object(o.a)({},m)})]})},Ft=n(186),Bt=n.n(Ft),Pt=function(e){var t=Object(D.g)(),n=Object(v.b)();return Object(b.jsx)("button",{onClick:function(){(null===e||void 0===e?void 0:e.clearEntryStore)&&(console.log("clear state"),n(Object(m.b)())),t.goBack()},className:Bt.a.goBack,children:"\u2190"})},Mt=n(69),At=n.n(Mt),Rt=function(){var e,t,n,l=Object(D.h)();n=null===l||void 0===l||null===(e=l.state)||void 0===e?void 0:e.libUUID;var a=Object(i.useState)({}),r=Object(E.a)(a,2),c=r[0],d=r[1],u=Object(i.useState)("main"),s=Object(E.a)(u,2),j=s[0],m=s[1],p=Object(v.b)(),O=Object(Pe.a)(He),h=Object(E.a)(O,1)[0],x=Object(Pe.a)(We),g=Object(E.a)(x,1)[0],U=Object(D.g)(),y=!!n,_=null===(t=Object(v.c)((function(e){return Xe(e)})))||void 0===t?void 0:t.storageType,I=Object(v.c)((function(e){return Object(f.f)(e,n)}));n&&!(null===c||void 0===c?void 0:c.libUUID)&&d(Object(o.a)({},I)),n||(null===c||void 0===c?void 0:c.libUUID)||d((function(e){return Object(o.a)(Object(o.a)({},e),{},{libUUID:Object(C.a)()})})),console.log("libConfig",c);var w=function(e){d((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(Ot.a)({},e.target.id,e.target.value))}))},L=function(){return"main"===j?At.a.active:[]},N=function(){return"fields"===j?At.a.active:[]};return Object(b.jsxs)("div",{className:At.a.main,children:[Object(b.jsxs)("header",{className:At.a.header,children:[Object(b.jsx)("div",{className:At.a.goBack,children:Object(b.jsx)(Pt,{})}),Object(b.jsx)("button",{onClick:function(){try{console.log("saveLibraryHandler");var e=Object(o.a)({},c);e.sqlTableName=function(e){var t,n;return null===e||void 0===e||null===(t=e.replaceAll("  "," "))||void 0===t||null===(n=t.replaceAll(" ","_"))||void 0===n?void 0:n.toLowerCase()}(e.name),p(Object(f.a)(e)),p(Object(k.a)({name:e.name,libUUID:e.libUUID})),y?"outerDatabase"===_&&g({variables:{libraryTemplate:e}}):"outerDatabase"===_&&h({variables:{libraryTemplate:e}}),U.push("/")}catch(t){console.log("error occurred while update/insert template in db/state manager: ".concat(t))}},children:"\u2713"})]}),Object(b.jsxs)("section",{className:At.a.tab,children:[Object(b.jsx)("button",{onClick:function(){return m("main")},className:[At.a.tabButton,L()].join(" "),children:"Main"}),Object(b.jsx)("button",{onClick:function(){return m("fields")},className:[At.a.tabButton,N()].join(" "),children:"Field"})]}),"main"===j&&Object(b.jsxs)("section",{className:[At.a.mainOptions,L()].join(" "),children:[Object(b.jsx)("label",{htmlFor:"name",children:" Name"}),Object(b.jsx)("input",{type:"edit",id:"name",onBlur:w,defaultValue:c.name}),Object(b.jsx)("label",{htmlFor:"color",children:" Color"}),Object(b.jsx)("input",{type:"color",id:"color",onBlur:w}),Object(b.jsx)("label",{htmlFor:"group",children:" Group"}),Object(b.jsx)("input",{type:"text",id:"group",onBlur:w})]}),"fields"===j&&Object(b.jsx)("div",{className:[N()].join(" "),children:Object(b.jsx)(Et,{saveFieldsConfigHandler:function(e){d((function(t){return Object(o.a)(Object(o.a)({},t),{},{columns:e})}))},fields:c.columns})})]})},qt=n(188),Vt=n.n(qt),Jt=n(187),Ht=n.n(Jt),Wt=function(e){var t=e.handleCloseMenu,n=Object(D.g)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ce.a,{onClick:function(){n.push("/configuration"),t()},children:"Configuration"}),Object(b.jsx)(ce.a,{onClick:function(){n.push("/creator"),t()},children:"New Library"})]})},Gt=function(){var e=Object(i.useState)(null),t=Object(E.a)(e,2),n=t[0],l=t[1],a=function(){l(null)},r=Object(D.g)();return Object(b.jsx)(s.a,{sx:{flexGrow:1},children:Object(b.jsx)(p.a,{position:"static",children:Object(b.jsxs)(O.a,{children:[Object(b.jsx)(h.a,{size:"large",edge:"start",color:"inherit","aria-label":"settings",sx:{mr:2},onClick:function(){r.push("/configuration")},children:Object(b.jsx)(Ht.a,{})}),Object(b.jsx)(x.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Default group"}),Object(b.jsx)(h.a,{size:"large","aria-label":"config","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit",children:Object(b.jsx)(Vt.a,{})}),Object(b.jsx)(ut.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(n),onClose:a,children:Object(b.jsx)(Wt,{handleCloseMenu:a})})]})})})},Kt=n(337),zt=n(322),$t=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return Xe(e)})),n=Object(i.useState)(null===t||void 0===t?void 0:t.storageType),l=Object(E.a)(n,2),a=l[0],r=l[1],o=Object(i.useState)(!1),c=Object(E.a)(o,2),d=c[0],u=c[1],j=function(e,t){"clickaway"!==t&&u(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(I,{title:"Configuration"}),Object(b.jsx)("form",{onSubmit:function(t){var n={storageType:a};e(Ye(n)),localStorage.setItem("config",JSON.stringify(n)),t.preventDefault(),u(!0)},children:Object(b.jsxs)(s.a,{display:"flex",flexDirection:"column",children:[Object(b.jsxs)(Kt.a,{sx:{m:3},children:[Object(b.jsx)(zt.a,{id:"storageTypeLabel",children:"Storage type"}),Object(b.jsxs)(oe.a,{labelId:"storageTypeLabel",id:"storageType",value:a,onChange:function(e){r(e.target.value)},autoWidth:!0,label:"Storage type",children:[Object(b.jsx)(ce.a,{value:"localStorage",children:"Local storage"}),Object(b.jsx)(ce.a,{value:"outerDatabase",children:"Outer database"})]})]}),Object(b.jsx)(ke.a,{type:"submit",variant:"contained",children:"Save"}),Object(b.jsx)(et.a,{open:d,autoHideDuration:5e3,onClose:j,children:Object(b.jsx)(tt.a,{onClose:j,severity:"success",sx:{width:"100%"},children:"Config saved successfully!"})})]})})]})};var Yt=function(){console.log("main function APP");var e=Object(pt.a)(qe),t=e.loading,n=e.error,l=e.data,a=Object(pt.a)(Re),r=a.loading,o=a.error,d=a.data,u=Object(v.b)();return Object(i.useEffect)((function(){console.log("read data from localStorage");var e=localStorage.getItem("config");u(Ye(JSON.parse(e)));var t=localStorage.getItem("templates");u(Object(f.g)(JSON.parse(t)));var n=localStorage.getItem("libsData");u(Object(k.k)(JSON.parse(n)))}),[]),Object(i.useEffect)((function(){o?console.error("error In GET_LIBRARIES_TEMPLATES",o):r||u(Object(f.g)(null===d||void 0===d?void 0:d.librariesTemplates))}),[d,u,r,o]),Object(i.useEffect)((function(){n?console.error("error In GET_LIBRARIES_DATA_PG",n):t||u(Object(k.j)(null===l||void 0===l?void 0:l.librariesDataPG))}),[t,l,u,n]),Object(b.jsx)(c.a,{children:Object(b.jsxs)(D.d,{children:[Object(b.jsx)(D.b,{exact:!0,path:"/",render:function(){return Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)(Gt,{}),Object(b.jsx)(mt,{})]})}}),Object(b.jsx)(D.b,{exact:!0,path:"/library",component:S}),Object(b.jsx)(D.b,{exact:!0,path:"/library/entry/",component:it}),Object(b.jsx)(D.b,{exact:!0,path:"/creator",component:Rt}),Object(b.jsx)(D.b,{exact:!0,path:"/configuration",component:$t}),Object(b.jsx)(D.a,{to:"/"})]})})},Zt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,351)).then((function(t){var n=t.getCLS,i=t.getFID,l=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),l(e),a(e),r(e)}))},Xt=Object(ze.b)({name:"librariesRecords",initialState:{items:[]},reducers:{test:function(e,t){console.log("test reducers"),console.log("state",e),console.log("action.payload",t.payload)},updateAllLibrariesRecords:function(e,t){console.log("updateAllLibrariesRecords"),e.items=t.payload},updateLibraryRecord:function(e,t){var n=t.payload,i=n.libUUID,l=n.rowUUID,a=n.editedFields,r=Object(o.a)({},e.items),c=e.items.findIndex((function(e){return e.libUUID===i})),d=e.items[c].rows.findIndex((function(e){return e.rowUUID===l})),u=r[c].rows[d].columns.map((function(e){var t=a.find((function(t){return t.field.columnUUID===e.columnUUID})).field,n=t.entryLinks,i=t.value;return Object(o.a)(Object(o.a)({},e),{},{value:i,entryLinks:n})}));r[c].rows[d].columns=u,console.log("updateLibraryRecord"),console.log("updateLibraryRecord 2"),Object(o.a)(Object(o.a)({},e),{},{items:r})}}}),Qt=Xt.actions,en=(Qt.test,Qt.updateAllLibrariesRecords,Qt.updateLibraryRecord,Xt.reducer),tn=Object(ze.a)({reducer:{librariesTemplate:f.b,librariesRecords:en,editedEntry:m.c,librariesData:k.c,configuration:Ze}}),nn=n(312),ln=n(313),an=n(309),rn=function(){console.log("BrowserStore");var e=Object(v.c)((function(e){return Object(k.i)(e)}));e.length&&localStorage.setItem("libsData",JSON.stringify(e));var t=Object(v.c)((function(e){return Object(f.d)(e)}));return t.length&&localStorage.setItem("templates",JSON.stringify(t)),Object(b.jsx)(b.Fragment,{})},on=n(324),cn=n(189),dn=n(168),un=n(308),sn=Object(cn.a)({palette:{primary:{dark:dn.a[700],main:dn.a[500],light:dn.a[400],lighter:dn.a[200]},secondary:{main:un.a[300],light:un.a[100],dark:un.a[600]}}}),bn=new nn.a({uri:"http://192.168.55.37:4000",cache:new ln.a({addTypename:!1})});r.a.render(Object(b.jsx)(l.a.StrictMode,{children:Object(b.jsx)(v.a,{store:tn,children:Object(b.jsx)(an.a,{client:bn,children:Object(b.jsx)(on.a,{theme:sn,children:Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)(Yt,{}),Object(b.jsx)(rn,{})]})})})})}),document.getElementById("root")),Zt()},25:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return b}));var i=n(53),l=Object(i.b)({name:"editedEntry",initialState:{items:[]},reducers:{clearState:function(e,t){e.items=[]},updateFieldValue:function(e,t){var n=t.payload,i=n.columnUUID,l=n.value,a=n.type,r=n.checked,o=e.items.findIndex((function(e){return e.field.columnUUID===i})),c=l;"checkbox"===a&&(c=r?"1":"0"),o>=0&&(e.items[o].field.value=String(c))},updateEntryValues:function(e,t){e.items=t.payload},addNewEntryLink:function(e,t){var n=t.payload,i=n.parentColumnUUID,l=n.rowUUID,a=n.fe_title,r=n.newUUID,o=n.libUUID,c=n.sqlTableName,d=n.columnParentName,u={rowUUID:l,columnUUID:i,rowTitle:a,libUUID:o,tableName:c,columnParentName:d};console.log("linkENtry: ",u,"newUUID:",r);var s,b,j=e.items.findIndex((function(e){return e.field.columnUUID===i}));if(j>=0)if((null===(s=e.items[j].field)||void 0===s||null===(b=s.entryLinks)||void 0===b?void 0:b.length)>0){var v,f,m,p,O;console.log("fieldIndex",j,"newUUID",r),(null===(v=e.items[j])||void 0===v||null===(f=v.field)||void 0===f||null===(m=f.value)||void 0===m?void 0:m.value)||(e.items[j].field.value.value=r),null===(p=e.items[j].field)||void 0===p||null===(O=p.entryLinks)||void 0===O||O.push(u)}else{console.log("newUUID",r);var h=[];h.push(u),e.items[j].field.value.value=r,e.items[j].field.entryLinks=h}},deleteEntryLink:function(e,t){var n,i,l=t.payload,a=l.columnUUID,r=l.entryIndex,o=e.items.findIndex((function(e){return e.field.columnUUID===a}));o>=0&&r>=0&&(null===(n=e.items[o].field)||void 0===n||null===(i=n.entryLinks)||void 0===i||i.splice(r,1))}}}),a=l.actions,r=a.updateFieldValue,o=a.updateEntryValues,c=a.addNewEntryLink,d=a.deleteEntryLink,u=a.clearState;t.c=l.reducer;var s=function(e){var t;return null===(t=e.editedEntry)||void 0===t?void 0:t.items},b=function(e,t){var n;return null===(n=e.editedEntry)||void 0===n?void 0:n.items.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))}},31:function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"l",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"i",(function(){return v})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return p}));var i=n(22),l=n(53),a=Object(l.b)({name:"librariesDataSlice",initialState:[],reducers:{updateAllLibrariesDataFromStorage:function(e,t){var n;null===(n=t.payload)||void 0===n||n.forEach((function(t){e.push(t)}))},updateAllLibrariesData:function(e,t){var n;null===(n=t.payload)||void 0===n||n.forEach((function(t){var n=[];t.rows.forEach((function(e){var t=JSON.parse(e.rowJSON);n.push(Object(i.a)({rowUUID:e.rowUUID,fe_title:e.fe_title,fe_description:e.fe_description},t))}));var l={name:t.name,libUUID:t.libUUID,rows:n};e.push(l)}))},addNewLibraryData:function(e,t){var n=t.payload,i=n.libUUID,l={name:n.name,libUUID:i,rows:[]};e.push(l)},updateLibraryRecord:function(e,t){var n=t.payload,i=n.libUUID,l=n.rowUUID,a=n.editedFields;console.log("editedFields",a);var r=e.findIndex((function(e){return e.libUUID===i}));console.log("libIndex",r);var o=e[r].rows.findIndex((function(e){return e.rowUUID===l}));console.log("updateStart:",o),a.forEach((function(t){var n,i,l,a=t.columnTemplate.sqlFieldName;a&&("libEntry"===t.columnTemplate.type?(e[r].rows[o][a].value=null===(n=t.field)||void 0===n||null===(i=n.value)||void 0===i?void 0:i.value,e[r].rows[o][a].entrylinks=null===(l=t.field)||void 0===l?void 0:l.entryLinks):e[r].rows[o][a]=t.field.value)})),console.log("UpdateEnds:",e[r].rows[o])},addNewLibraryRecord:function(e,t){var n=t.payload,i=n.libUUID,l=n.rowUUID,a=n.editedFields,r=n.name;console.log("editedFields",a);var o=e.findIndex((function(e){return e.libUUID===i}));o<0&&(e.push({name:r,libUUID:i,rows:[]}),o=e.findIndex((function(e){return e.libUUID===i})),console.log("No library found while adding new record")),console.log("libIndex",o);var c={},d=[],u=[];a.forEach((function(e){var t,n,i,l=e.columnTemplate.sqlFieldName;l&&(c[l]={},"libEntry"===e.columnTemplate.type?(c[l].value=null===(t=e.field)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.value,c[l].entrylinks=null===(i=e.field)||void 0===i?void 0:i.entryLinks,"title"===e.columnTemplate.usage&&e.field.entryLinks.forEach((function(e){return d.push(e.rowTitle)})),"description"===e.columnTemplate.usage&&e.field.entryLinks.forEach((function(e){return u.push(e.rowTitle)}))):(c[l]=e.field.value,"title"===e.columnTemplate.usage&&d.push(e.field.value),"description"===e.columnTemplate.usage&&u.push(e.field.value)))})),c.rowUUID=l,c.fe_title=d.join(" "),c.fe_description=u.join(" "),e[o].rows.push(c)},deleteLibraryData:function(e,t){var n=t.payload.libUUID,i=e.findIndex((function(e){return e.libUUID===n}));i>-1&&e.splice(i,1)},deleteRowData:function(e,t){var n=t.payload,i=n.libUUID,l=n.rowUUID;console.log("libUUID, rowUUID ",i,l);var a=e.findIndex((function(e){return e.libUUID===i}));if(a>-1){console.log("libIndex ",a);var r=e[a].rows.findIndex((function(e){return e.rowUUID===l}));r>-1&&e[a].rows.splice(r,1)}}}}),r=a.actions,o=r.updateAllLibrariesData,c=r.addNewLibraryData,d=r.updateLibraryRecord,u=r.addNewLibraryRecord,s=r.updateAllLibrariesDataFromStorage,b=r.deleteLibraryData,j=r.deleteRowData;t.c=a.reducer;var v=function(e){return null===e||void 0===e?void 0:e.librariesData},f=function(e,t){var n;return null===(n=e.librariesData)||void 0===n?void 0:n.find((function(e){return e.libUUID===t}))},m=function(e,t){var n,i,l=t.rowUUID,a=t.libUUID;return l&&a?null===(n=e.librariesData)||void 0===n||null===(i=n.find((function(e){return e.libUUID===a})))||void 0===i?void 0:i.rows.find((function(e){return e.rowUUID===l})):null},p=function(e,t){var n=t.libUUID,i=t.listRowsUUID,l=e.librariesData.find((function(e){return e.libUUID===n}));return null===l||void 0===l?void 0:l.rows.filter((function(e){return i.includes(e.rowUUID)}))}},33:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return s}));var i=n(53),l=Object(i.b)({name:"librariesTemplate",initialState:[],reducers:{updateAllLibraries:function(e,t){var n;null===(n=t.payload)||void 0===n||n.map((function(t){return e.push(t)}))},addNewLibraryTemplate:function(e,t){var n=t.payload.libUUID;console.log("libUUID in addNewLibraryTemplate",n);var i=e.findIndex((function(e){return e.libUUID===n}));i>=0?(console.log("found templateLib",t.payload),e[i]=t.payload):(console.log("not found template lib"),e.push(t.payload))},deleteLibraryTemplate:function(e,t){var n=t.payload.libUUID,i=e.findIndex((function(e){return e.libUUID===n}));e.splice(i,1)}}}),a=l.actions,r=a.updateAllLibraries,o=a.addNewLibraryTemplate,c=a.deleteLibraryTemplate;t.b=l.reducer;var d=function(e){return e.librariesTemplate},u=function(e,t){var n;return null===(n=e.librariesTemplate)||void 0===n?void 0:n.find((function(e){return e.libUUID===t}))},s=function(e){return e.librariesTemplate.map((function(e){return{libUUID:e.libUUID,name:e.name,sqlTableName:e.sqlTableName}}))}},69:function(e,t,n){e.exports={main:"TemplateLibraryCreator_main__3Zjq5",goBack:"TemplateLibraryCreator_goBack__13EA7",header:"TemplateLibraryCreator_header__3uiit",mainOptions:"TemplateLibraryCreator_mainOptions__1Ihk_",tab:"TemplateLibraryCreator_tab__rTDK9",tabButton:"TemplateLibraryCreator_tabButton__3_S2w",active:"TemplateLibraryCreator_active__3oLlr"}},89:function(e,t,n){e.exports={modal:"TemplateFieldCreator_modal__2LBeV",header:"TemplateFieldCreator_header__2c5ZU",form:"TemplateFieldCreator_form__WrC7n",backdrop:"TemplateFieldCreator_backdrop__UE-c2",container:"TemplateFieldCreator_container__1oYxx",type:"TemplateFieldCreator_type__2hAG4"}},96:function(e,t,n){e.exports={modal:"SelectField_modal__1uSDM",backdrop:"SelectField_backdrop__1-YyJ",header:"SelectField_header__h5m7Z",ul:"SelectField_ul__2VuWy",list:"SelectField_list__GapW0"}}},[[231,1,2]]]);
//# sourceMappingURL=main.24e78a1e.chunk.js.map